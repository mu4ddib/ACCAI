using MediatR; using ACCAI.Application.Dtos; using ACCAI.Domain.Entities; using ACCAI.Domain.Services; namespace ACCAI.Application.Voters; public sealed class VoterRegisterCommandHandler : IRequestHandler<VoterRegisterCommand, VoterDto> { private readonly RecordVoterService _service; public VoterRegisterCommandHandler(RecordVoterService service)=>_service=service; public async Task<VoterDto> Handle(VoterRegisterCommand request, CancellationToken ct){ var voter=new Voter(request.Nid, request.DateOfBirth, request.Origin); var saved=await _service.RecordAsync(voter, ct); return new VoterDto(saved.Id, saved.Nid, saved.Origin, saved.DateOfBirth);} }